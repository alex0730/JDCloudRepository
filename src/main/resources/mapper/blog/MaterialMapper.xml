<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lee.mapper.MaterialMapper">

    <!--<resultMap id="ResultMap" type="com.lee.entity.MaterialMapper">-->
        <!--<id column="id" property="id" />-->
        <!--<result column="username" property="username" />-->
        <!--<result column="password" property="password" />-->
        <!--<result column="nickname" property="nickname" />-->
        <!--<result column="roleName" property="roleName" />-->
        <!--<result column="deptName" property="deptName" />-->
        <!--<result column="mobile" property="mobile" />-->
        <!--<result column="status" property="status" />-->
        <!--<result column="is_supper" property="isSupper" />-->
        <!--<result column="create_time" property="createTime" />-->
        <!--<result column="update_time" property="updateTime" />-->
        <!--<result column="delete_time" property="deleteTime" />-->
    <!--</resultMap>-->

    <resultMap id="sysMaterialInfoMapper" type="com.lee.entity.SysMaterialInfoModel">
        <result property="id" column="id" />
        <result property="matPurchaseNum" column="mat_purchase_num" />
        <result property="matOrderNum" column="mat_order_num" />
        <result property="matName" column="mat_name" />
        <result property="matTypeCode" column="mat_type_code" />
        <result property="matSpecs" column="mat_specs" />
        <result property="matUnit" column="mat_unit" />
        <result property="supplierName" column="supplierName" />
        <result property="matNum" column="mat_num" />
        <result property="matTemporaryDate" column="mat_temporary_date" />
    </resultMap>

    <select id="selectMaterialList" resultMap="sysMaterialInfoMapper" parameterType="java.util.Map">
        SELECT
        a.id,
        mat_purchase_num,
        mat_order_num,
        mat_name,
        mat_type_code,
        mat_specs,
        mat_unit,
        mat_num,
        mat_temporary_date,
        b.sup_name as supplierName
        FROM
        sys_material_info a
        JOIN sys_supplier_info b ON a.supplier_num = b.sup_num
        WHERE
        a.isdel = 0
        <if test="matPurchaseNum != null">
            and a.mat_purchase_num =#{matPurchaseNum}
        </if>
        <if test="matOrderNum != null">
            and a.mat_order_num =#{matOrderNum}
        </if>
        <if test="matTypeCode != null">
            and a.mat_type_code =#{matTypeCode}
        </if>
        <if test="supplierNum != null">
            and b.sup_num =#{supplierNum}
        </if>
        <if test="matName != null">
            and a.mat_name =#{matName}
        </if>
        <if test="offsetIndex != null">limit #{offsetIndex}, #{limit}</if>
    </select>
    <select id="selectMaterialCount" resultType="Integer" parameterType="java.util.Map">
        SELECT
          count(1)
        FROM
        sys_material_info a
        JOIN sys_supplier_info b ON a.supplier_num = b.sup_num
        WHERE
        a.isdel = 0
        <if test="matPurchaseNum != null">
            and a.mat_purchase_num =#{matPurchaseNum}
        </if>
        <if test="matOrderNum != null">
            and a.mat_order_num =#{matOrderNum}
        </if>
        <if test="matTypeCode != null">
            and a.mat_type_code =#{matTypeCode}
        </if>
        <if test="supplierNum != null">
            and b.sup_num =#{supplierNum}
        </if>
        <if test="matName != null">
            and a.mat_name =#{matName}
        </if>
    </select>

</mapper>
